<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VG BUD - Salg</title>
    <style>
        :root { --primary: #d32f2f; --success: #2e7d32; --vipps: #2196f3; --bg: #f8f9fa; --text: #333; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 15px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 400px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--primary); margin-top: 0; font-weight: 900; letter-spacing: 1px; }
        .group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 1em; }
        input, select { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 12px; box-sizing: border-box; font-size: 16px; transition: 0.3s; }
        
        /* Fargekoding for Cash og Vipps */
        .cash-input { border-left: 8px solid #4caf50; background: #f1f8f1; }
        .vipps-input { border-left: 8px solid #2196f3; background: #e3f2fd; }
        
        .section-title { font-size: 1.1em; color: var(--primary); margin: 25px 0 10px 0; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        
        button { width: 100%; background: var(--primary); color: white; border: none; padding: 18px; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        #status { display: none; text-align: center; }
        .result-item { margin: 10px 0; padding: 15px; border-radius: 12px; background: #fff; border: 1px solid #eee; text-align: left; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .money-val { font-weight: bold; float: right; font-size: 1.1em; }
    </style>
</head>
<body>

<div class="card">
    <div id="formContainer">
        <h2>üì∞ VG BUD</h2>
        <form id="paperForm">
            <div class="group">
                <label>Dag og Bestilling</label>
                <select name="day" id="daySelect" style="margin-bottom:10px">
                    <option value="L√∏rdag">L√∏rdag (14 aviser)</option>
                    <option value="S√∏ndag">S√∏ndag (11 aviser)</option>
                </select>
                <select name="date" id="dateDropdown"></select>
            </div>

            <div class="section-title">ANTALL SOLGTE AVISER</div>
            <div class="group">
                <label>üíµ Solgt KONTANT</label>
                <input type="number" name="soldCash" id="soldCash" class="cash-input" placeholder="Antall aviser" required>
            </div>
            <div class="group">
                <label>üì± Solgt p√• VIPPS</label>
                <input type="number" name="soldVipps" id="soldVipps" class="vipps-input" placeholder="Antall aviser" required>
            </div>

            <div class="section-title">TIPS (KRONER)</div>
            <div class="group">
                <label>üíµ Tips KONTANT</label>
                <input type="number" name="tipsCash" id="tipsCash" class="cash-input" placeholder="Kroner mottatt" value="0">
            </div>
            <div class="group">
                <label>üì± Tips p√• VIPPS</label>
                <input type="number" name="tipsVipps" id="tipsVipps" class="vipps-input" placeholder="Kroner mottatt" value="0">
            </div>

            <input type="hidden" name="ordered" id="ordered" value="14">
            <button type="submit" id="submitBtn">LEGG INN</button>
        </form>
    </div>

    <div id="status">
        <h2>‚úÖ Lagret!</h2>
        <div class="result-item">
            <span>üí∞ Jakobs l√∏nn i dag:</span>
            <span class="money-val" id="resEarned" style="color: var(--success);">0 kr</span>
        </div>
        <div class="result-item">
            <span id="debtLabel">Mellomv√¶rende:</span>
            <span class="money-val" id="resDebt">0 kr</span>
        </div>
        <div class="result-item" style="border-left: 5px solid #ff9800;">
            <span>üè¶ Mamma m√• betale VG:</span>
            <span class="money-val" id="resToVG" style="color: #e65100;">0 kr</span>
        </div>
        <button onclick="location.reload()" style="background: #eee; color: #333; font-size: 14px; margin-top:20px">Logg ny dag</button>
    </div>
</div>

<script>
    // HUSK √Ö SETTE DIN URL HER:
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzYp_p00-EMoT4_4Snw-thiReCor5_X5y65a6LmmURfZb8H8eyKPha7Nw7M__kKUSiJ/exec';
    
    const form = document.getElementById('paperForm');
    const daySelect = document.getElementById('daySelect');
    const orderedInput = document.getElementById('ordered');
    const dateDropdown = document.getElementById('dateDropdown');

    // Auto-oppsett
    const today = new Date();
    if (today.getDay() === 6) { daySelect.value = "L√∏rdag"; orderedInput.value = 14; } 
    else { daySelect.value = "S√∏ndag"; orderedInput.value = 11; }
    daySelect.addEventListener('change', () => { orderedInput.value = (daySelect.value === 'L√∏rdag') ? 14 : 11; });

    for (let i = 0; i < 14; i++) {
        let d = new Date(); d.setDate(today.getDate() - i);
        if (d.getDay() === 0 || d.getDay() === 6) {
            let opt = document.createElement('option');
            opt.value = d.toLocaleDateString('no-NO');
            opt.innerHTML = d.toLocaleDateString('no-NO', { weekday: 'short', day: 'numeric', month: 'short' });
            dateDropdown.appendChild(opt);
        }
    }

    form.addEventListener('submit', e => {
        e.preventDefault();
        const sCash = parseInt(document.getElementById('soldCash').value) || 0;
        const sVipps = parseInt(document.getElementById('soldVipps').value) || 0;
        const tCash = parseInt(document.getElementById('tipsCash').value) || 0;
        const tVipps = parseInt(document.getElementById('tipsVipps').value) || 0;
        
        const totalSold = sCash + sVipps;
        const totalTips = tCash + tVipps;
        const earningsToday = (totalSold * 22) + totalTips;
        const toVG = totalSold * 33;
        const faktiskeVippsKroner = (sVipps * 55) + tVipps;
        const diff = faktiskeVippsKroner - earningsToday;

        document.getElementById('submitBtn').disabled = true;
        document.getElementById('submitBtn').innerText = "Lagrer...";

        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
            .then(() => {
                document.getElementById('resEarned').innerText = earningsToday + " kr";
                document.getElementById('resToVG').innerText = toVG + " kr";
                const dLabel = document.getElementById('debtLabel');
                const dRes = document.getElementById('resDebt');
                if (diff < 0) {
                    dLabel.innerText = "üí∏ Mamma skylder Jakob:";
                    dRes.innerText = Math.abs(diff) + " kr";
                    dRes.style.color = "green";
                } else {
                    dLabel.innerText = "üè¶ Jakob skylder Mamma:";
                    dRes.innerText = diff + " kr";
                    dRes.style.color = "red";
                }
                document.getElementById('formContainer').style.display = 'none';
                document.getElementById('status').style.display = 'block';
            })
            .catch(error => alert('Feil! Pr√∏v igjen.'));
    });
</script>
</body>
</html>
